const Bahasa = {
  languages: [
    { code: 'auto', name: 'Deteksi bahasa' },
    { code: 'ab', name: 'Abkhaz' },
    { code: 'ace', name: 'Aceh' },
    { code: 'ach', name: 'Acoli' },
    { code: 'aa', name: 'Afar' },
    { code: 'af', name: 'Afrikaans' },
    { code: 'sq', name: 'Albania' },
    { code: 'alr', name: 'Alur' },
    { code: 'am', name: 'Amharik' },
    { code: 'ar', name: 'Arab' },
    { code: 'hy', name: 'Armenia' },
    { code: 'as', name: 'Assam' },
    { code: 'av', name: 'Avar' },
    { code: 'awa', name: 'Awadhi' },
    { code: 'ay', name: 'Aymara' },
    { code: 'az', name: 'Azerbaijan' },
    { code: 'ban', name: 'Bali' },
    { code: 'bal', name: 'Baluchi' },
    { code: 'bm', name: 'Bambara' },
    { code: 'bci', name: 'Baoulé' },
    { code: 'ba', name: 'Bashkir' },
    { code: 'eu', name: 'Bask' },
    { code: 'bcc', name: 'Batak Karo' },
    { code: 'bts', name: 'Batak Simalungun' },
    { code: 'btb', name: 'Batak Toba' },
    { code: 'nl', name: 'Belanda' },
    { code: 'be', name: 'Belarussia' },
    { code: 'bem', name: 'Bemba' },
    { code: 'bn', name: 'Bengali' },
    { code: 'bew', name: 'Betawi' },
    { code: 'bcl', name: 'Bikol' },
    { code: 'bs', name: 'Bosnia' },
    { code: 'br', name: 'Breton' },
    { code: 'bg', name: 'Bulgaria' },
    { code: 'bxr', name: 'Buriat' },
    { code: 'cs', name: 'Ceko' },
    { code: 'ch', name: 'Chamorro' },
    { code: 'ce', name: 'Chechen' },
    { code: 'cic', name: 'Chichewa' },
    { code: 'zh-CN', name: 'China (Aks. Sederhana)' },
    { code: 'zh-TW', name: 'China (Aks. Tradisional)' },
    { code: 'chk', name: 'Chuuke' },
    { code: 'cv', name: 'Chuvash' },
    { code: 'fa-AF', name: 'Dari' },
    { code: 'da', name: 'Denmark' },
    { code: 'din', name: 'Dinka' },
    { code: 'dv', name: 'Divehi' },
    { code: 'doi', name: 'Dogri' },
    { code: 'doa', name: 'Dombe' },
    { code: 'dyu', name: 'Dyula' },
    { code: 'dz', name: 'Dzongkha' },
    { code: 'eo', name: 'Esperanto' },
    { code: 'et', name: 'Estonia' },
    { code: 'ee', name: 'Ewe' },
    { code: 'fo', name: 'Faroe' },
    { code: 'fa', name: 'Farsi' },
    { code: 'fj', name: 'Fiji' },
    { code: 'fi', name: 'Finlandia' },
    { code: 'fon', name: 'Fon' },
    { code: 'fy', name: 'Frisia' },
    { code: 'fur', name: 'Friuli' },
    { code: 'ff', name: 'Fulani' },
    { code: 'gaa', name: 'Ga' },
    { code: 'gd', name: 'Gaelig' },
    { code: 'gv', name: 'Gaelik Skotlandia' },
    { code: 'gl', name: 'Galisia' },
    { code: 'ka', name: 'Georgia' },
    { code: 'gn', name: 'Guarani' },
    { code: 'gu', name: 'Gujarati' },
    { code: 'cnh', name: 'Hakha Chin' },
    { code: 'ha', name: 'Hausa' },
    { code: 'haw', name: 'Hawaii' },
    { code: 'hil', name: 'Hiligaynon' },
    { code: 'hi', name: 'Hindi' },
    { code: 'hmn', name: 'Hmong' },
    { code: 'hu', name: 'Hungaria' },
    { code: 'hr', name: 'Hunsrik' },
    { code: 'iba', name: 'Iban' },
    { code: 'he', name: 'Ibrani' },
    { code: 'ig', name: 'Igbo' },
    { code: 'ilo', name: 'Iloko' },
    { code: 'is', name: 'Islandia' },
    { code: 'it', name: 'Italia' },
    { code: 'jv', name: 'Jawa' },
    { code: 'ja', name: 'Jepang' },
    { code: 'de', name: 'Jerman' },
    { code: 'kac', name: 'Jingpo' },
    { code: 'kl', name: 'Kalaallisut' },
    { code: 'kn', name: 'Kannada' },
    { code: 'yue', name: 'Kanton' },
    { code: 'kr', name: 'Kanuri' },
    { code: 'ca', name: 'Katalan' },
    { code: 'kk', name: 'Kazakh' },
    { code: 'kek', name: 'Kekchi' },
    { code: 'kha', name: 'Khasi' },
    { code: 'km', name: 'Khmer' },
    { code: 'ki', name: 'Kiga' },
    { code: 'rw', name: 'Kinyarwanda' },
    { code: 'ky', name: 'Kirgiz' },
    { code: 'ktu', name: 'Kituba' },
    { code: 'trv', name: 'Kokborok' },
    { code: 'kv', name: 'Komi' },
    { code: 'kg', name: 'Kongo' },
    { code: 'gom', name: 'Konkani' },
    { code: 'ko', name: 'Korea' },
    { code: 'co', name: 'Korsika' },
    { code: 'ht', name: 'Kreol Haiti' },
    { code: 'mfe', name: 'Kreol Mauritius' },
    { code: 'crs', name: 'Kreol Seselwa' },
    { code: 'jam', name: 'Krio' },
    { code: 'hrx', name: 'Kroasia' },
    { code: 'kmr', name: 'Kurdi (Kurmanji)' },
    { code: 'sdh', name: 'Kurdi (Sorani)' },
    { code: 'lo', name: 'Lao' },
    { code: 'ltg', name: 'Latgalia' },
    { code: 'la', name: 'Latin' },
    { code: 'lv', name: 'Latvia' },
    { code: 'lij', name: 'Liguria' },
    { code: 'li', name: 'Limburgia' },
    { code: 'ln', name: 'Lingala' },
    { code: 'lt', name: 'Lituania' },
    { code: 'lmo', name: 'Lombard' },
    { code: 'lg', name: 'Luganda' },
    { code: 'lb', name: 'Luksemburg' },
    { code: 'luo', name: 'Luo' },
    { code: 'mdr', name: 'Madura' },
    { code: 'mai', name: 'Maithili' },
    { code: 'bug', name: 'Makassar' },
    { code: 'mk', name: 'Makedonia' },
    { code: 'mg', name: 'Malagasi' },
    { code: 'ml', name: 'Malayalam' },
    { code: 'mt', name: 'Malta' },
    { code: 'mr', name: 'Marathi' },
    { code: 'tvl', name: 'Masing' },
    { code: 'men', name: 'Mende' },
    { code: 'gv-IM', name: 'Manx Gaelic' },
    { code: 'mi', name: 'Maori' },
    { code: 'mo', name: 'Moldavia' },
    { code: 'mn', name: 'Mongolia' },
    { code: 'mwl', name: 'Miranda' },
    { code: 'or', name: 'Oriya' },
    { code: 'mgp', name: 'Pagi' },
    { code: 'pam', name: 'Pampanga' },
    { code: 'ps', name: 'Pashto' },
    { code: 'pfl', name: 'Pfalz' },
    { code: 'pa', name: 'Punjabi' },
    { code: 'qu', name: 'Quechua' },
    { code: 'ro', name: 'Rumania' },
    { code: 'rm', name: 'Rumantsch' },
    { code: 'rn', name: 'Rundi' },
    { code: 'ru', name: 'Rusia' },
    { code: 'sh', name: 'Serbia (Cyrillic)' },
    { code: 'sr', name: 'Serbia (Latin)' },
    { code: 'sid', name: 'Sidama' },
    { code: 'sd', name: 'Sindhi' },
    { code: 'scn', name: 'Sisilia' },
    { code: 'sco', name: 'Skotlandia' },
    { code: 'sl', name: 'Slovenia' },
    { code: 'sk', name: 'Slowakia' },
    { code: 'slk', name: 'Slovakia' },
    { code: 'sma', name: 'Sudan Selatan' },
    { code: 'su', name: 'Sunda' },
    { code: 'sv', name: 'Swedia' },
    { code: 'gsw', name: 'Swiss Jerman' },
    { code: 'ty', name: 'Tahiti' },
    { code: 'tl', name: 'Tagalog' },
    { code: 'tg', name: 'Tajik' },
    { code: 'tmh', name: 'Tamaseq' },
    { code: 'ta', name: 'Tamil' },
    { code: 'tzm', name: 'Tangier Tamazight' },
    { code: 'tt', name: 'Tatar' },
    { code: 'te', name: 'Telugu' },
    { code: 'th', name: 'Thailand' },
    { code: 'bo', name: 'Tibet' },
    { code: 'tig', name: 'Tigre' },
    { code: 'ti', name: 'Tigrinya' },
    { code: 'to', name: 'Tonga' },
    { code: 'tw', name: 'Twi' },
    { code: 'udm', name: 'Udmurt' },
    { code: 'uk', name: 'Ukraina' },
    { code: 'ur', name: 'Urdu' },
    { code: 'uz', name: 'Uzbekistan' },
    { code: 'vi', name: 'Vietnam' },
    { code: 'vo', name: 'Volapük' },
    { code: 'cy', name: 'Wales' },
    { code: 'war', name: 'Waray' },
    { code: 'wae', name: 'Walser' },
    { code: 'fy-NL', name: 'West Frisia' },
    { code: 'wo', name: 'Wolof' },
    { code: 'xh', name: 'Xhosa' },
    { code: 'ari', name: 'Yakut' },
    { code: 'yua', name: 'Yucatec Maya' },
    { code: 'zap', name: 'Zapotec' },
    { code: 'zul', name: 'Zulu' },
  ],

  async render() {
    // Membuat pilihan dropdown dari daftar bahasa
    const languageOptions = this.languages.map((lang) => `<option value="${lang.code}">${lang.name}</option>`).join('');

    return `
    <div class="translate-app">
      <div class="title">
        <h1>Translate Bahasa</h1>
      </div>
      <div class="card">
        <h2>Masukkan Teks</h2>
        <textarea id="inputText" rows="4" cols="50" placeholder="Masukkan teks di sini"></textarea>
        <br>
        <br>
        <h2>Sebelum Diterjemahkan</h2>
        <div id="beforeTranslation"></div>
        <br>
        <br>
        <label for="targetLanguage">Pilih Bahasa Tujuan:</label>
        <select id="targetLanguage">${languageOptions}</select>
        <button id="translateButton">Terjemahkan</button>
        <h2>Setelah Diterjemahkan</h2>
        <div id="translatedText"></div>
      </div>
    </div>
    `;
  },

  async afterRender() {
    const translateButton = document.getElementById('translateButton');
    const inputText = document.getElementById('inputText');
    const beforeTranslation = document.getElementById('beforeTranslation');
    const translatedText = document.getElementById('translatedText');
    const targetLanguage = document.getElementById('targetLanguage');

    translateButton.addEventListener('click', async () => {
      const text = inputText.value.trim();
      const selectedLanguageCode = targetLanguage.value;

      if (text) {
        beforeTranslation.innerText = text; // Tampilkan teks asli

        // Lakukan terjemahan menggunakan Google Translate
        // eslint-disable-next-line no-use-before-define
        const translated = await translateText(text, 'auto', selectedLanguageCode);
        translatedText.innerText = translated;
      }
    });
  },
};

async function translateText(text, from, to) {
  const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${from}&tl=${to}&dt=t&q=${encodeURIComponent(text)}`;

  try {
    const response = await fetch(url);
    const data = await response.json();
    console.log('API Response:', data); // Debugging: Log response data

    // Ekstrak teks yang diterjemahkan dari respons
    if (data && data[0] && data[0][0] && data[0][0][0]) {
      return data[0][0][0];
    }

    return 'Terjemahan gagal.';
  } catch (error) {
    console.error('Error translating text:', error);
    return 'Terjemahan gagal.';
  }
}

export default Bahasa;
